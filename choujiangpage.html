<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/public.css">
    <link rel="stylesheet" href="./css/choujiangpage.css">
    <link rel="stylesheet" href="./css/cj_animation.css">
    <title></title>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 parent_box">
                <div class="bgpic_box">
                    <img src="./imgs/page2/background.jpg" alt="">
                </div>
                <div id="luohuayu" class="luohuayu">
                    <ul>
                        <li>
                            <img src="./imgs/page2/luohuayu.png" alt="luohuayu">
                        </li>
                        <li>
                            <img src="./imgs/page2/luohuayu.png" alt="luohuayu">
                        </li>
                        <li>
                            <img src="./imgs/page2/luohuayu.png" alt="luohuayu">
                        </li>
                    </ul>
                </div>
                <div class="qiqiu1">
                    <img src="./imgs/page2/1.png" alt="">
                </div>
                <div class="qiqiu2">
                    <img src="./imgs/page2/2.png" alt="">
                </div>
                <div class="qiqiu3">
                    <img src="./imgs/page2/3.png" alt="">
                </div>
                <div class="laohuji">
                    <img src="./imgs/page2/laohuji.png" alt="">
                    <div id="laohuji_btn" class="laohuji_btn">
                        <img src="./imgs/page2/begin.png" alt="">
                    </div>
                    <div class="tel_list text-center">
                        <!-- <span class="tel_list_show red_color_font">135-9998-8797</span> -->
                        <div id="list_li">
                            <ul></ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="shade_outerBox">
            <div class="shade_innerBox">
                <div class="shade_caidai_da">
                    <img src="./imgs/page2/caidaida.png" alt="">
                </div>
                <div class="shade_caidai_xiao">
                    <img src="./imgs/page2/caidaixiao.png" alt="">
                </div>
                <div class="shade_bgpic">
                    <img src="./imgs/page2/zhongjiang_1.png" alt="">
                </div>
                <div class="shade_text">
                    恭喜
                    <span>13594177896</span>获得一等奖
                </div>
                <div class="shade_btn">
                    <img src="./imgs/page2/close_btn.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/TweenMax.min.js"></script>
    <script>
        function GetRequest() {
            var url = location.search; //获取url中"?"符后的字串
            var theRequest = new Object();
            if (url.indexOf("?") != -1) {
                var str = url.substr(1);
                strs = str.split("&");
                for (var i = 0; i < strs.length; i++) {
                    theRequest[strs[i].split("=")[0]] = decodeURIComponent(strs[i].split("=")[1]);
                }
            }
            return theRequest;
        }

        let telList, btnState = 1;
        $.ajax({
            url: "./data/data.json",
            type: "get",
            success(data) {
                telList = data.tel;
            },
            error() {
                console.log("tel请求失败");
            }
        });

        const req = GetRequest();
        let index_1 = req['id'];

        let index = -66;
        const luoHuaYu = $("#luohuayu")
            , laoHuJiBtn = $("#laohuji_btn");

        TweenMax.fromTo(".qiqiu1", 3, { rotationZ: -30, transformOrigin: "left top" }, { rotationZ: 30, repeat: -1, yoyo: true })
        TweenMax.fromTo(".qiqiu2", 3, { rotationZ: -30, transformOrigin: "left top" }, { rotationZ: 30, repeat: -1, yoyo: true })
        TweenMax.fromTo(".qiqiu3", 3, { rotationZ: -30, transformOrigin: "right top" }, { rotationZ: 30, repeat: -1, yoyo: true })

        // setInterval(()=>{
        //     luoHuaYu.css("top",`${index++}%`);
        //     if(index>0){
        //         index = -66
        //     }
        // },1000/30);

        const tl = new TimelineLite();
        const telListDom = $('#list_li').children('ul');
        const tellistBox = $('.tel_list');
        const height = tellistBox.css('height')
        
        const timeOverLi = 1;
        // tl.to(".green", 1, {x:550})
        // .to(".blue", 1, {x:550})
        // .to(".orange", 1, {x:550})
        laoHuJiBtn.on("click", function () {
            if (!telList) return;
            const len = telList.length;
            const ylen = -len * height;
            const obj = {a:ylen}
            switch (btnState) {
                case 1:
                    btnState++;
                    $(this).children("img").attr("src", "./imgs/page2/stop.png");
                    //增加li
                    let liDom = '';
                    telList.forEach((tel) => {
                        liDom += `<li style="height:${height}; line-height:${height}" class="tel_list_show red_color_font">${tel}</li>`
                    })
                    telListDom.html(liDom)
                    //滾動
                    TweenMax.to('#list_li', len*timeOverLi, {
                        y: -1000,
                        repeat: -1,
                        ease: '',
                    })
                    break;
                case 2:
                    //减速动画
                    btnState++;
                    // alert('2')
                    break;

            }
        });



    </script>
</body>

</html>